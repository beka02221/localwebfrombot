<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        canvas {
            background-color: #000;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas" width="400" height="400"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    const gridSize = 20;
    let snake = [{ x: 160, y: 160 }];
    let direction = { x: 0, y: 0 };
    let apple = { x: 0, y: 0 };
    let score = 0;

    // Рисуем объект (змею или яблоко)
    function drawRect(x, y, color) {
        ctx.fillStyle = color;
        ctx.fillRect(x, y, gridSize, gridSize);
    }

    // Случайная позиция яблока
    function randomApple() {
        apple.x = Math.floor(Math.random() * (canvas.width / gridSize)) * gridSize;
        apple.y = Math.floor(Math.random() * (canvas.height / gridSize)) * gridSize;
    }

    // Обновление змеи
    function updateSnake() {
        const newHead = { x: snake[0].x + direction.x * gridSize, y: snake[0].y + direction.y * gridSize };

        // Проверка на столкновение с границей или телом змеи
        if (newHead.x < 0  newHead.x >= canvas.width  newHead.y < 0  newHead.y >= canvas.height  snake.some(segment => segment.x === newHead.x && segment.y === newHead.y)) {
            clearInterval(gameLoop);
            alert(Game Over! Your score: ${score});
            return;
        }

        // Если съедено яблоко
        if (newHead.x === apple.x && newHead.y === apple.y) {
            score++;
            randomApple();
        } else {
            snake.pop(); // Удаляем последний сегмент, если не съели яблоко
        }

        snake.unshift(newHead); // Добавляем новый сегмент
    }

    // Рендерим игру
    function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        snake.forEach(segment => drawRect(segment.x, segment.y, 'lime'));
        drawRect(apple.x, apple.y, 'red');
    }

    // Основной цикл игры
    function game() {
        updateSnake();
        render();
    }

    // Обработка нажатий клавиш
    window.addEventListener('keydown', e => {
        const key = e.key;
        if (key === 'ArrowUp' && direction.y === 0) {
            direction = { x: 0, y: -1 };
        } else if (key === 'ArrowDown' && direction.y === 0) {
            direction = { x: 0, y: 1 };
        } else if (key === 'ArrowLeft' && direction.x === 0) {
            direction = { x: -1, y: 0 };
        } else if (key === 'ArrowRight' && direction.x === 0) {
            direction = { x: 1, y: 0 };
        }
    });

    // Старт игры
    randomApple();
    const gameLoop = setInterval(game, 100);
</script>

</body>
</html>